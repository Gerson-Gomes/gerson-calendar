// Code generated by cmd/cgo; DO NOT EDIT.

//line /home/omar-gerson/Fullstack/gerson-calendar/src/go/pkg/mod/github.com/wailsapp/wails/v2@v2.11.0/internal/frontend/desktop/linux/screen.go:1:1
//go:build linux
// +build linux

package linux

/*
#cgo linux pkg-config: gtk+-3.0 
#cgo !webkit2_41 pkg-config: webkit2gtk-4.0
#cgo webkit2_41 pkg-config: webkit2gtk-4.1

#cgo CFLAGS: -w
#include <stdio.h>
#include "webkit2/webkit2.h"
#include "gtk/gtk.h"
#include "gdk/gdk.h"

typedef struct Screen {
	int isCurrent;
	int isPrimary;
	int height;
	int width;
	int scale;
} Screen;

int GetNMonitors(GtkWindow *window){
	GdkWindow *gdk_window = gtk_widget_get_window(GTK_WIDGET(window));
	GdkDisplay *display = gdk_window_get_display(gdk_window);
	return gdk_display_get_n_monitors(display);
}

Screen GetNThMonitor(int monitor_num, GtkWindow *window){
	GdkWindow *gdk_window = gtk_widget_get_window(GTK_WIDGET(window));
	GdkDisplay *display = gdk_window_get_display(gdk_window);
	GdkMonitor *monitor = gdk_display_get_monitor(display,monitor_num);
	GdkMonitor *currentMonitor = gdk_display_get_monitor_at_window(display,gdk_window);
	Screen screen;
	GdkRectangle geometry;
	gdk_monitor_get_geometry(monitor,&geometry);
	screen.isCurrent = currentMonitor==monitor;
	screen.isPrimary = gdk_monitor_is_primary(monitor);
	screen.height = geometry.height;
	screen.width = geometry.width;
	screen.scale = gdk_monitor_get_scale_factor(monitor);
	return screen;
}
*/
import _ "unsafe"
import (
	"sync"

	"github.com/pkg/errors"
	"github.com/wailsapp/wails/v2/internal/frontend"
)

type Screen = frontend.Screen

func GetAllScreens(window * /*line :57:28*/_Ctype_GtkWindow /*line :57:39*/) ([]Screen, error) {
	if window == nil {
		return nil, errors.New("window is nil, cannot perform screen operations")
	}
	var wg sync.WaitGroup
	var screens []Screen
	wg.Add(1)
	invokeOnMainThread(func() {
		numMonitors := func() _Ctype_int{ _cgo0 := /*line :65:33*/window; _cgoCheckPointer(_cgo0, nil); return /*line :65:40*/_Cfunc_GetNMonitors(_cgo0); }()
		for i := 0; i < int(numMonitors); i++ {
			cMonitor := func() _Ctype_struct_Screen{ var _cgo0 _Ctype_int = _Ctype_int /*line :67:37*/(i); _cgo1 := /*line :67:42*/window; _cgoCheckPointer(_cgo1, nil); return /*line :67:49*/_Cfunc_GetNThMonitor(_cgo0, _cgo1); }()

			screen := Screen{
				IsCurrent: cMonitor.isCurrent == 1,
				IsPrimary: cMonitor.isPrimary == 1,
				Width:     int(cMonitor.width),
				Height:    int(cMonitor.height),

				Size: frontend.ScreenSize{
					Width:  int(cMonitor.width),
					Height: int(cMonitor.height),
				},
				PhysicalSize: frontend.ScreenSize{
					Width:  int(cMonitor.width * cMonitor.scale),
					Height: int(cMonitor.height * cMonitor.scale),
				},
			}
			screens = append(screens, screen)
		}

		wg.Done()
	})
	wg.Wait()
	return screens, nil
}
